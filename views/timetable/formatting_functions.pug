-
  function getTimetablePageLabel(timetablePage) {
    if (timetablePage.timetable_page_label !== '' && timetablePage.timetable_page_label !== null) {
      return timetablePage.timetable_page_label;
    }
    // Get route info from first timetable
    return timetablePage.consolidatedTimetables[0].timetable_label;
  }

  function getTimetableSummary(timetable) {
    var summary = `This table shows schedules for a selection of key stops on the route for ${timetable.timetable_label} ${timetable.dayList}.`;
    if (timetable.orientation = 'vertical') {
      summary += ' Stops and their schedule times are listed in the columns.';
    } else if (timetable.orientation = 'horizontal') {
      summary += ' Schedule times are listed in rows, starting with the stop name in the first cell of the row.';
    } else if (timetable.orientation = 'hourly') {
      summary += ' Schedule times are listed in rows, starting with the stop name in the first cell of the row and the minutes after the hour in the second row.';
    }
    return summary;
  }

  function formatHtmlId(id) {
    return id.replace(/([^A-Za-z0-9[\]{}_.:-])\s?/g, '');
  }

  function formatStopName(stop) {
    return `${stop.stop_name}${stop.type === 'arrival' ? ' (Arrival)' : stop.type === 'departure' ? ' (Departure)' : ''}`;
  }

  function formatTripName(trip, idx, timetable) {
    let tripName = '';
    if (timetable.routes.length > 1) {
      tripName = trip.route_short_name;
    } else if (trip.trip_short_name) {
      tripName += trip.trip_short_name;
    } else {
      tripName += `Run #${idx + 1}`;
    }
  
    if (timetable.showDayList) {
      tripName += ` ${trip.dayList}`;
    }
  
    return tripName;
  }

  function formatFrequencyWarning(frequencies) {
    var warning = 'Trip times shown below are an example only. ';
    frequencies.forEach((frequency, idx) => {
      if (idx === 0) {
        warning += 'This route runs every ';
      } else {
        warning += ' and ';
      }
      warning += `${frequency.headway_min} minutes between ${frequency.start_formatted_time} and ${frequency.end_formatted_time}`;
    });
    warning += '.';
    return warning;
  }
